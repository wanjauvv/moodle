define(["jquery"],function(a){"use strict";var b={FILTER_BUTTON:".filterbutton",TILE:".tile",COLLAPSING:".tile-collapsing",COLLAPSED:".tile-collapsed",SPACER:".spacer",PAGE_CONTENT:"#page-content",REGION_MAIN:"#region-main"},c={COLLAPSING:"tile-collapsing",COLLAPSED:"tile-collapsed",SELECTED:"selected"},d={getPressedFilterButton:function(a,b){return b?localStorage.getItem("mdl-course-"+a+"-filter-btn"):null},setPressedFilterButton:function(a,b,c){c&&(0===b?localStorage.removeItem("mdl-course-"+a+"-filter-btn"):localStorage.setItem("mdl-course-"+a+"-filter-btn",b))},unCollapseTiles:function(d){d.forEach(function(b,e){a("#tile-"+d[e]).addClass(c.COLLAPSING).removeClass(c.COLLAPSED)}),setTimeout(function(){a(b.COLLAPSING).removeClass(c.COLLAPSING)},300)},collapseAllTiles:function(){a(b.TILE).not(a(b.COLLAPSED)).not(a(b.SPACER)).addClass(c.COLLAPSING),setTimeout(function(){a(b.COLLAPSING).addClass(c.COLLAPSED).removeClass(c.COLLAPSING)},250)},unCollapseAllTiles:function(){setTimeout(function(){a(b.COLLAPSED).addClass(c.COLLAPSING).removeClass(c.COLLAPSED),setTimeout(function(){a(b.COLLAPSING).removeClass(c.COLLAPSING)},250)},250)}};return{init:function(e,f){a(document).ready(function(){var g=d.getPressedFilterButton(e,f);if(g){var h=a("#filterbutton"+g);h||d.setPressedFilterButton(e,g,0),a(b.FILTER_BUTTON).removeClass(c.SELECTED),h.addClass(c.SELECTED),d.collapseAllTiles(),setTimeout(function(){d.unCollapseTiles(JSON.parse(h.attr("data-sections")))},250),d.setPressedFilterButton(e,g,f)}var i=a(b.PAGE_CONTENT);0===i.length&&(i=a(b.REGION_MAIN)),i.on("click",b.FILTER_BUTTON,function(g){var h=a(g.target),i=h.attr("data-buttonid");"all"===i||d.getPressedFilterButton(e,f)===i?(d.collapseAllTiles(),setTimeout(function(){d.unCollapseAllTiles()},500),a(b.FILTER_BUTTON).removeClass(c.SELECTED),d.setPressedFilterButton(e,0,f),a("#filterbutton-all").addClass(c.SELECTED)):(a(b.FILTER_BUTTON).removeClass(c.SELECTED),h.addClass(c.SELECTED),d.collapseAllTiles(),setTimeout(function(){d.unCollapseTiles(JSON.parse(h.attr("data-sections")))},250),d.setPressedFilterButton(e,i,f))})})}}});